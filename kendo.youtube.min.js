(function(a){var b=window.kendo,c=b.ui,d=c.Widget,e=d.extend({autoComplete:{},listView:{},pager:{},init:function(c,e){var f=this,g,h,i,j,k,e;d.fn.init.call(f,c,e),e=f.options,h=a("<input style='width: 100%; font-size: 1.5em;' />"),f.element.append(h),j=a("<div class='k-pager-wrap' style='display: none'><div class='k-pager'></div></div>"),f.element.append(j),i=a("<div></div>"),f.element.append(i),f.suggest=new b.data.DataSource({transport:{read:{url:"http://clients1.google.com/complete/search",dataType:"jsonp"},parameterMap:f._suggestParameterMap},schema:{parse:f._suggestParse},serverFiltering:!0}),autoComplete=h.kendoAutoComplete({dataSource:f.suggest,placeholder:e.placeholder,suggest:!0,minLength:3,dataTextField:"value",template:"<span>#= data.value #</span>",change:f._search}).data("kendoAutoComplete"),f.youtube=new b.data.DataSource({transport:{read:{url:"http://gdata.youtube.com/feeds/api/videos?max-results=10&v=2&alt=jsonc",dataType:"jsonp"},parameterMap:f._ytParameterMap},schema:{data:"data",parse:f._ytParse,total:f._ytTotal},pageSize:10,serverPaging:!0}),listView=i.kendoListView({autoBind:!1,dataSource:f.youtube,template:e.template}).data("kendoListView"),i.css("border-width","0"),pager=j.kendoPager({dataSource:f.youtube}).data("kendoPager")},options:{name:"YouTube",template:"<div style='padding: 10px;'><div style='float: left;'><a href='${player.default}' target='_blank'><img height='90' width='120' src='${thumbnail.sqDefault}' alt='thumbnail' /></a></div><div style='margin-left: 130px; height: 90px;'><h4 style='margin: 2px'><a href='${player.default}' target='_blank'>${title}</a></h4><div style='font-size: .8em'><p>${description}</p></div></div></div>",placeholder:"Search YouTube"},_ytParse:function(b){var c={count:b.data.totalItems,data:[]};return c.data=a.map(b.data.items,function(a){return a.description=a.description||"",a.description=a.description.length>100?a.description.substring(0,100)+"...":a.description,a}),c},_ytParameterMap:function(a){return{q:autoComplete.value(),"start-index":a.skip===0?1:a.skip}},_ytTotal:function(a){a.count=a.count||0;if(a.count>0)return pager.element.show(),a.count;pager.element.hide(),listView.element.hide()},_suggestParse:function(b){return a.map(b[1],function(a){return{value:a[0]}})},_suggestParameterMap:function(){return{q:autoComplete.value(),client:"youtube",nolabels:"t"}},_search:function(a){this.value().length>0?(listView.dataSource.read(),pager.element.show(),listView.element.show()):(listView.element.hide(),pager.element.hide())}});c.plugin(e)})(jQuery);